<!-- Preview Banner - Only shown on surge.sh preview URLs -->
<div id="preview-banner" style="display: none;">
  <div class="preview-banner-content">
    <div class="preview-banner-icon">‚ö†Ô∏è</div>
    <div class="preview-banner-text">
      <strong>Environnement de pr√©visualisation</strong>
      <span class="preview-banner-subtitle">Ce n'est pas le site officiel - Site de test uniquement</span>
    </div>
    <a id="preview-banner-pr-link" href="#" class="preview-banner-link" style="display: none;" target="_blank" rel="noopener noreferrer">
      üí¨ Donner votre avis sur la PR
    </a>
    <button id="preview-banner-close" class="preview-banner-close" aria-label="Fermer">‚úï</button>
  </div>
</div>

<script>
(function() {
  // Check if we're on a preview URL (surge.sh or preview in hostname)
  if (window.location.hostname.includes('surge.sh') || window.location.hostname.includes('preview')) {
    var banner = document.getElementById('preview-banner');
    var closeBtn = document.getElementById('preview-banner-close');
    var prLink = document.getElementById('preview-banner-pr-link');
    
    if (banner) {
      banner.style.display = 'block';
      document.body.classList.add('preview-banner-shown');
    }
    
    // Extract PR number from hostname (format: pr-{NUMBER}-roq-preview.surge.sh)
    var hostname = window.location.hostname;
    var prMatch = hostname.match(/^pr-(\d+)-/);
    if (prMatch && prMatch[1] && prLink) {
      var prNumber = prMatch[1];
      // Validate PR number contains only digits (additional safety check)
      if (/^\d+$/.test(prNumber)) {
        prLink.href = 'https://github.com/tc11-fr/tc11.fr/pull/' + prNumber;
        prLink.style.display = 'inline-flex';
      }
    }
    
    if (closeBtn) {
      closeBtn.addEventListener('click', function() {
        if (banner) {
          banner.style.display = 'none';
          document.body.classList.remove('preview-banner-shown');
        }
      });
    }
  }
})();
</script>
